<!DOCTYPE html>
<html>

<head>
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>

<body>
    <p><a href="index.html">Home</a></p>
    <h3>Get a job!</h3>
    <p>Same thing, but for workers to find employers</p>
    <div id="map"></div>
    <script>

        var markers;

        // these will be loaded of all worker profiles in your firebase
        var worker_locations = [{
                lat: 30.20,
                lng: -97.643
            },
            {
                lat: 30.40,
                lng: -97.85
            },
            {
                lat: 30.35,
                lng: -97.55
            },
            {
                lat: 30.35,
                lng: -97.55
            },
        ]


        function initMap(locations) {

            function addMarker(marker_location, map_object) {
                var marker = new google.maps.Marker({
                    position: marker_location,
                    map: map_object,
                    url: 'profile_worker.html'
                });
                return marker
            }

            var center_of_austin = {
                lat: 30.30,
                lng: -97.743
            };

            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: center_of_austin
            });

            markers = worker_locations.map(function(location) {
                return addMarker(location, map)
            });

            console.log(markers);
            google.maps.event.addDomListener(window, 'load', initMap);
            markers.map(function(marker) {
                google.maps.event.addListener(
                    marker,
                    'click',
                    function() {
                        window.location.href = marker.url;
                    }
                );
            })
        }



    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCC2bn09ZM8jNrPx2UDsb96a0ql3BTssvs&callback=initMap">
    </script>
</body>

</html>
